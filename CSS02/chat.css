/* ===== 基本設定 ===== */
:root {
  --font-base: 'Noto Sans', sans-serif;
  --chat-max: 1400px;
  --container-max: calc(var(--chat-max) + 40px);
  --header-h: 72px;                 /* 建議與實際 header 高度一致 */
  --color-bg: rgba(255,255,255,.85);
  --color-input-bg: #fff;
  --color-primary: #121417;
  --radius-lg: 18px;
  --radius-md: 12px;

  /* 依品牌調色 */
  --bubble-user-bg: #eaf2ff;        /* 使用者：淡藍 */
  --bubble-user-border: #cfdcff;
  --bubble-bot-bg:  #f6f7f9;        /* AI：淡灰 */
  --bubble-bot-border: rgba(0,0,0,.06);
}

html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  font-family: var(--font-base);
}
*, *::before, *::after { box-sizing: border-box; }

.layout-wrapper {
  position: relative;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  overflow-x: hidden;
  background: url('img1.png') center/cover no-repeat; /* 路徑請以 CSS 檔為相對基準 */
}

/* ===== Header ===== */
.header {
  position: fixed;
  top: 0;
  left: 0;               /* 讓頂欄吃滿寬度 */
  right: 0;
  padding: 12px 40px;
  z-index: 1000;
  background: transparent;
}
.header-right {
  display: flex;
  flex: 1;
  justify-content: flex-end;
  gap: 32px;
}
.nav-links { display: flex; align-items: center; gap: 36px; }
.nav-link {
  color: #121417;
  font-size: 15px;
  font-weight: 500;
  text-decoration: none;
}
.nav-link:hover { text-decoration: underline; }

/* ===== Main ===== */
.main-content{
  padding-top: var(--header-h);
  display: flex;
  justify-content: center;
  flex: 1;
}
.content-container{
  display: flex;
  flex-direction: column;
  width: 100%;
  max-width: var(--container-max);
}

/* ===== 聊天卡片：Grid 兩列，上訊息，下輸入列 ===== */
.chat-box{
  width: clamp(280px, 85vw, var(--chat-max));
  margin: 0 auto;
  background: var(--color-bg);
  backdrop-filter: blur(8px);
  border: 1px solid rgba(255,255,255,0.8);
  border-radius: var(--radius-lg);
  box-shadow: 0 4px 16px rgba(0,0,0,0.08);

  position: relative;
  height: clamp(520px, 75vh, 900px);
  display: grid;
  grid-template-rows: 1fr auto;     /* 上：訊息；下：輸入列 */
  gap: 12px;
  padding: 24px;
  overflow: hidden;                  /* 保持圓角/陰影 */
}

/* 訊息列表：自滾動區 */
#messages{
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 0 4px 12px;
  min-height: 0;                     /* Grid/Flex 容器內能正確滾動 */
  overflow-y: auto;
  overscroll-behavior: contain;      /* 不連動整頁 */
  scroll-padding-block-end: 12px;    /* 捲到底留緩衝 */
  -webkit-overflow-scrolling: touch; /* iOS 慣性捲動 */
  scrollbar-gutter: stable;          /* 避免捲軸出現造成 reflow */
}

/* ===== 有序列表調整 ===== */
ol {
    list-style-position: inside; /* 讓數字標記內縮 */
    padding-left: 20px; /* 調整內縮距離 */
    margin-left: 0; /* 確保沒有額外的外邊距 */
}

li {
    padding-left: 10px; /* 增加每個項目的縮排 */
    text-indent: -15px; /* 調整數字的對齊 */
}

/* 控制有序列表項目內容對齊 */
ol li {
    margin-left: 0;
    padding-left: 10px;
    text-align: left;  /* 確保每一項文字左對齊 */
}

/* ===== 輸入元件 ===== */
.chat-input{
  flex: 1;
  min-width: 0;
  border: none;
  background: transparent;
  height: 48px;
  font-size: 16px;
  color: #121417;
  padding-right: 8px;
}
.chat-input::placeholder { color: #677583; }
.chat-input:focus-visible{
  outline: 2px solid rgba(200,192,174,.8);
  outline-offset: 2px;
}

/* ===== 其他設定 ===== */
.upload-section { display: none; }
.hidden { display: none; }

/* 最外層遮罩 */
.overlay{
  position: fixed; inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex; justify-content: center; align-items: center;
  z-index: 2000;
}
.overlay.hidden, .result-section.hidden{ display: none !important; }

/* Modal */
.modal-box{
  background: #fff; padding: 20px; border-radius: 12px;
  width: 90%; max-width: 600px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.12);
}
.btn-row{
  display: flex; justify-content: flex-end; gap: 12px; margin-top: 12px;
}
.modal-title{
  margin: 0 0 12px; font-size: 25px; font-weight: 600; color: #333;
  font-family: 'Noto Sans', sans-serif;
}
.divider{ margin: 16px 0; border: 0; border-top: 1px solid #e0e0e0; }
.preview-img{
  max-width: 100%; max-height: 200px; display: block;
  margin: 10px 0; object-fit: contain;
}
.result-section{ margin-top: 10px; }
.result-title{ margin: 0 0 8px; font-size: 16px; font-weight: 500; }
.result-text{
  width: 100%; height: 100px; resize: vertical; padding: 8px;
  font-size: 14px; line-height: 1.4; border: 1px solid #ccc;
  border-radius: 6px; margin-bottom: 10px;
}

/* ===== 響應式 ===== */
@media (max-width: 768px){
  .main-content { padding-top: var(--header-h); } /* 不用魔數 100px */
  .header { padding: 12px 20px; }
  .nav-links, .header-right { gap: 20px; }
  .page-title { font-size: 24px; }

  .chat-box{
    height: 65vh;
    padding: 16px;        /* Grid 版不需再留 96px 的底部空隙 */
  }
  .chat-bar{ width: auto; }  /* 讓 Grid 決定寬度即可 */
}

@media (max-width: 480px){
  .nav-links { display: none; }
  .page-title { font-size: 20px; }
  .chat-input { font-size: 14px; }
}
